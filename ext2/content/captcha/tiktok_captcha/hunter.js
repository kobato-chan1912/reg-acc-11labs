(()=>{let s=!1;async function d(e){return fetch(e).then(e=>e.blob()).then(r=>new Promise((e,t)=>{let c=new FileReader;c.onloadend=()=>e(c.result),c.onerror=t,c.readAsDataURL(r)}))}setInterval(async function(){if(window.registerCaptchaWidget&&!s){if(s=!0,!isCaptchaWidgetRegistered("tiktok",0)){var n=document.evaluate("//*[contains(text(), 'Xác minh để tiếp tục:')]|//*[contains(text(), 'Kéo mảnh ghép vào đúng vị trí')]|//*[contains(text(), 'Verify to continue:')]|//*[contains(text(), '続行するには認証が必要です:')]|//*[contains(text(), 'Verifica para continuar:')]|//*[contains(text(), 'Verifique para continuar:')]|//*[contains(text(), 'Verifiziere, um fortzufahren:')]|//*[contains(text(), 'Drag the puzzle piece into place')]",document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;let a=null,i=null;var o=document.evaluate("//*[contains(text(), 'Which of these objects')]",document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,l=document.querySelector('[class*="captcha_verify_container"],[class*="captcha-verify-container"]');if(l){var u=document.evaluate("//div[contains(text(), 'Image')]",document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(u)u.click();else{u=l.querySelectorAll("img");if(1===(u=Array.from(u).filter(e=>!e.src.includes("chrome-extension"))).length&&document.querySelector('img[class*="cap-w-full cap-h-auto"]'))a=document.querySelector(".captcha_verify_bar")||l.querySelector("div").querySelector("div");else{if(2!==u.length)return void(s=!1);u.find(e=>e.className.includes("slide"));n||(i=l.querySelector("div").querySelector("div"))}let e=0,t="",c=null,r="";if(o){e=5;u=document.querySelector(".cap-w-full img");if(!u||!u.src)return document.querySelector(".captcha_verify_message")&&(document.querySelector(".secsdk_captcha_refresh--text")?.click(),document.querySelector("div.cap-flex-row button")?.click()),void(s=!1);t=await d(u.src),c=o.parentNode,r=document.querySelector("span.cap-flex.cap-items-center")?.textContent}else if(a){e=2;l=document.querySelector('[class*="captcha-verify-container"] img[class*=cap]')||document.querySelector("#captcha-verify-image");if(!l||!l.src)return document.querySelector(".captcha_verify_message")&&(document.querySelector(".secsdk_captcha_refresh--text")?.click(),document.querySelector("div.cap-flex-row button")?.click()),void(s=!1);t=await d(t=l.src),c=a}else if(i){e=0;u=document.querySelector('[data-testid="whirl-outer-img"], .captcha_verify_container img:nth-child(1)')||document.querySelector(".captcha-verify-container img:nth-child(1)");if(!u||!u.src)return document.querySelector(".captcha_verify_message")&&(document.querySelector(".secsdk_captcha_refresh--text")?.click(),document.querySelector("div.cap-flex-row button")?.click()),void(s=!1);o=document.querySelector(".captcha_verify_container img:nth-child(3)")||document.querySelector(".captcha-verify-container img:nth-child(2)");if(!o||!o.src)return void(s=!1);u=await d(u.src),o=await d(o.src),t=u+"|"+o,c=i}else{if(!n)return void(s=!1);e=1;l=document.querySelector("#captcha-verify-image");if(!l||!l.src)return document.querySelector(".captcha_verify_message")&&(document.querySelector(".secsdk_captcha_refresh--text")?.click(),document.querySelector("div.cap-flex-row button")?.click()),void(s=!1);t=await d(l.src),c=n.parentNode}u={};u.main=t,u.subType=e,u.other=r,c.id||(c.id="tiktok-container-"+Date.now()),u.captchaType="tiktok",u.widgetId=0,u.containerId=c.id,u.callback=null,registerCaptchaWidget(u)}}}s=!1}},1e3)})();
