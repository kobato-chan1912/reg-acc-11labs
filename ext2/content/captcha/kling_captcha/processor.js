function simulateDragV2(r,i){return new Promise(n=>{var e=new DragEvent("dragstart",{bubbles:!0,clientX:0,clientY:8}),a=(r.dispatchEvent(e),0),c=1;!function e(){a+=1;var t=new DragEvent("drag",{bubbles:!0,clientX:a,clientY:8}),t=(r.dispatchEvent(t),document.querySelector(".slider-btn"));parseInt(t.style.marginLeft.split("px")[0])<i?setTimeout(e,c):(t=new DragEvent("dragend",{bubbles:!0}),r.dispatchEvent(t),n())}()})}CaptchaProcessors.register({captchaType:"kling_captcha",canBeProcessed:function(e,t){return!!$("#"+e.containerId).length},attachButton:function(e,t,n){e=$("#"+e.containerId);n.css({width:e.find("iframe").outerWidth()+"px"}),e.append(n),t.kling_auto_solve&&n.click()},getParams:function(e,t){return e},onSolved:async function(e,t){var t=parseInt(t),t=Math.floor(t),n=document.querySelector("img.bg-img");t=t*n.clientWidth/n.naturalWidth,t=Math.floor(t)-5;let a=document.querySelector(".slider-btn");n=a.getBoundingClientRect();let c=n.left+n.width/2,r=n.top+n.height/2+10*Math.random()-5,i=c+t,o=r+10*Math.random()-5;function s(e,t,n){t=new Touch({identifier:Date.now(),target:a,clientX:t,clientY:n,pageX:t,pageY:n,screenX:t,screenY:n});return new TouchEvent(e,{bubbles:!0,cancelable:!0,touches:[t],targetTouches:[t],changedTouches:[t]})}a.dispatchEvent(s("touchstart",c,r));let u=setInterval(function(){var e=i-c,t=o-r,n=1e3/u*15,e=(c+=Math.min(e,n),r+=Math.min(t,n),s("touchmove",c,r));a.dispatchEvent(e)},1e3/15);await new Promise(e=>setTimeout(e,2680)),clearInterval(u),a.dispatchEvent(s("touchend",c,r)),await new Promise(e=>setTimeout(e,3e3+2e3*Math.random())),resetCaptchaWidget(e.captchaType,e.widgetId)},onFail:async function(e){document.querySelector(".icon-refresh")?.click(),await new Promise(e=>setTimeout(e,2e3)),resetCaptchaWidget(e.captchaType,e.widgetId)},getForm:function(e){return!1},getCallback:function(e){return null}});
