CaptchaProcessors.register({captchaType:"bytedance_captcha",canBeProcessed:function(e,t){return!!$("#"+e.containerId).length},attachButton:function(e,t,n){e=$("#"+e.containerId);n.css({width:e.find("iframe").outerWidth()+"px"}),e.append(n),t.tiktok_auto_solve&&n.click()},getParams:function(e,t){return e},onSolved:async function(t,n){if(2===parseInt(t.subType)){var[a,e,c,i]=n.split(",").splice(0,4),r=document.querySelector("#captcha_click_image")||document.querySelector(".cap-rounded-lg"),l=r.getBoundingClientRect(),o=r.width,u=r.height,a=parseInt(a)*o/r.naturalWidth,e=parseInt(e)*u/r.naturalHeight,c=parseInt(c)*o/r.naturalWidth,i=parseInt(i)*u/r.naturalHeight,o=l.left,u=l.top,l=(r.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,clientX:o+a,clientY:u+e})),await new Promise(e=>setTimeout(e,510)),r.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,clientX:o+c,clientY:u+i})),await new Promise(e=>setTimeout(e,1e3)),document.querySelector(".vc-captcha-verify-button-text"));l?l.click():document.querySelector('[class*="captcha-verify-container"] .TUXButton-label')?document.querySelector('[class*="captcha-verify-container"] .TUXButton-label').click():document.evaluate("//*[text()='Confirm']|//*[text()='Xác nhận']",document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null)?.singleNodeValue?.click(),await new Promise(e=>setTimeout(e,3e3+2e3*Math.random()))}else if(0===parseInt(t.subType)||1===parseInt(t.subType)||6===parseInt(t.subType)){let e;try{var d=document.querySelector(".captcha-verify-image");e=parseInt(n)*d.clientWidth/d.naturalWidth,e=Math.round(e)-3}catch{return void resetCaptchaWidget(t.captchaType,t.widgetId)}let c=document.querySelector(".captcha-slider-btn");a=c.getBoundingClientRect();let i=a.left+a.width/2+5,r=a.top+a.height/2+10*Math.random()-5,l=i+e,o=r+10*Math.random(),u=(c.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,clientX:i,clientY:r})),3),s=setInterval(function(){var e=l-i,t=o-r,n=Math.sqrt(e*e+t*t),a=.1+.1*Math.random(),a=(u=Math.min(u+a,10),Math.min(u/n,1)),e=(i+=e*a,r+=t*a,new MouseEvent("mousemove",{bubbles:!0,clientX:i,clientY:r}));c.dispatchEvent(e),n<1&&clearInterval(s)},1e3/60);await new Promise(e=>setTimeout(e,2670)),clearInterval(s),c.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0,clientX:i,clientY:r})),await new Promise(e=>setTimeout(e,5e3))}resetCaptchaWidget(t.captchaType,t.widgetId)},onFail:async function(e){document.querySelector("#refresh-button")?.click(),document.querySelector(".vc-captcha-refresh")?.click(),await new Promise(e=>setTimeout(e,3e3)),resetCaptchaWidget(e.captchaType,e.widgetId)},getForm:function(e){return!1},getCallback:function(e){return null}});
